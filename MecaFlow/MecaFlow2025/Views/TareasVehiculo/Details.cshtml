@model MecaFlow2025.Models.TareasVehiculo
@{
    ViewData["Title"] = "Detalles de la Tarea";
    Layout = null; // se usa dentro de modal
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

<style>
    body {
        background: linear-gradient(135deg, #141e30, #243b55);
        animation: gradientBG 15s ease infinite;
        background-size: 400% 400%;
        color: #fff;
    }

    @@keyframes gradientBG {
        0% {
            background-position: 0% 50%;
        }

        50% {
            background-position: 100% 50%;
        }

        100% {
            background-position: 0% 50%;
        }
    }

    .details-card {
        background-color: rgba(33, 37, 41, 0.9);
        padding: 2rem;
        border-radius: 1rem;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
        animation: fadeInUp 0.6s ease-in-out;
    }

    @@keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .details-label {
        font-weight: 600;
        color: #adb5bd;
    }

    .btn-group a, .btn-group button {
        min-width: 120px;
    }

    /* Estado */
    .badge-pill {
        border-radius: 999px;
        padding: .4rem .7rem;
        font-weight: 700;
        border: 1px solid rgba(255,255,255,.08);
    }

    .badge-done {
        background: #13321c;
        color: #9be7b0;
    }

    .badge-pending {
        background: #3a300a;
        color: #ffd86b;
    }

    /* Descripción multilínea legible */
    .multiline {
        white-space: pre-wrap;
        word-break: break-word;
    }
</style>

<div class="container py-5">
    <div class="details-card">
        <h2 class="mb-4">
            <i class="bi bi-hammer me-2"></i>Detalles de la Tarea
        </h2>

        <dl class="row">
            <dt class="col-sm-3 details-label">Tarea</dt>
            <dd class="col-sm-9">#@Model.TareaId</dd>

            <dt class="col-sm-3 details-label">Vehículo</dt>
            <dd class="col-sm-9">@(@Model.Vehiculo?.Placa ?? "—")</dd>

            <dt class="col-sm-3 details-label">Sector</dt>
            <dd class="col-sm-9">@((string.IsNullOrWhiteSpace(Model.Sector) ? "—" : Model.Sector))</dd>

            <dt class="col-sm-3 details-label">Descripción</dt>
            <dd class="col-sm-9 multiline">@((string.IsNullOrWhiteSpace(Model.Descripcion) ? "—" : Model.Descripcion))</dd>

            <dt class="col-sm-3 details-label">Fecha de Registro</dt>
            <dd class="col-sm-9">@Model.FechaRegistro?.ToString("dd/MM/yyyy")</dd>

            <dt class="col-sm-3 details-label">Estado</dt>
            <dd class="col-sm-9">
                @if (Model.Realizada)
                {
                    <span class="badge-pill badge-done"><i class="bi bi-check2-circle me-1"></i>Realizada</span>
                }
                else
                {
                    <span class="badge-pill badge-pending"><i class="bi bi-hourglass-split me-1"></i>Pendiente</span>
                }
            </dd>
        </dl>

        <div class="btn-group mt-4 d-flex flex-wrap gap-2">
            <a asp-action="Edit" asp-route-id="@Model.TareaId" class="btn btn-warning">
                <i class="bi bi-pencil-square me-1"></i>Editar
            </a>

            <!-- Toggle estado (opcional; usa tu acción existente) -->
            <form asp-action="ToggleRealizada" method="post" class="d-inline">
                @Html.AntiForgeryToken()
                <input type="hidden" name="id" value="@Model.TareaId" />
                <button type="submit" class="btn @(Model.Realizada ? "btn-outline-warning" : "btn-success")">
                    <i class="bi @(Model.Realizada ? "bi-arrow-counterclockwise" : "bi-check2-circle") me-1"></i>
                    @(Model.Realizada ? "Marcar pendiente" : "Marcar realizada")
                </button>
            </form>

            <a asp-action="Index" class="btn btn-outline-light ms-2">
                <i class="bi bi-arrow-left me-1"></i>Volver
            </a>
        </div>
    </div>
</div>
